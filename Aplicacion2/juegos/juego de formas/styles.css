*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
body{font-family:'Arial',sans-serif;background:linear-gradient(-45deg,#667eea,#764ba2,#f093fb,#f5576c,#4facfe,#00f2fe);background-size:400% 400%;animation:chromaticBackground 15s ease-in-out infinite;min-height:100vh;display:flex;flex-direction:column;color:#fff;overflow:hidden}
@keyframes chromaticBackground{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
header{padding:0.75rem 1rem;display:flex;align-items:center;justify-content:space-between;background:rgba(0,0,0,.25);backdrop-filter:blur(6px)}
.title{font-size:1.25rem;font-weight:600;cursor:pointer;user-select:none}
.status{font-size:.95rem;opacity:.9}
main{flex:1;display:flex;gap:1rem;padding:1rem;max-width:1400px;margin:0 auto;width:100%}
.palette,.board{flex:1;position:relative;border:2px dashed rgba(255,255,255,.25);border-radius:12px;padding:1rem;min-height:400px;background:rgba(255,255,255,.06);overflow:hidden}
.palette{display:block}
.board{display:block}
.hidden{display:none!important}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.65);display:flex;align-items:center;justify-content:center;z-index:10;opacity:0;pointer-events:none;transition:.35s}
.overlay.visible{opacity:1;pointer-events:auto}
.panel{background:rgba(10,24,42,.82);backdrop-filter:blur(10px);padding:2rem 2.25rem;border-radius:22px;max-width:440px;width:100%;box-shadow:0 6px 50px -8px rgba(0,0,0,.55),0 0 0 1px rgba(255,255,255,.06);text-align:center}
.panel h1{font-size:2rem;margin-bottom:.5rem}
.panel h2{font-size:1.75rem;margin-bottom:.5rem}
.options{display:grid;grid-template-columns:repeat(auto-fit,minmax(60px,1fr));gap:.75rem;margin:1rem 0}
.options button{background:#101d30;color:#fff;border:2px solid #2c4f7d;padding:.65rem .5rem;font-size:1.05rem;font-weight:600;border-radius:14px;cursor:pointer;transition:.35s;position:relative;overflow:hidden}
.options button:hover{background:#182a44}
.options button.selected{background:rgba(255,255,255,.08);border-color:#6cb8ff;box-shadow:0 0 0 3px rgba(108,184,255,.35)}
button:disabled{opacity:.4;cursor:not-allowed}
button{font:inherit}

/* Botones cromáticos especiales */
.btn-chroma{position:relative;overflow:hidden;border:2px solid transparent;background:#102034;color:#fff;font-weight:600;padding:.9rem 1.4rem;border-radius:18px;cursor:pointer;isolation:isolate;transition:color .35s,background .35s}
.btn-chroma::before{content:"";position:absolute;inset:0;padding:2px;border-radius:inherit;background:linear-gradient(140deg,#ffb347,#ff6b6b,#7f53ac,#43cea2,#ffb347);background-size:300% 300%;animation:chromaFlow 6s linear infinite;mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);mask-composite:exclude;-webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);-webkit-mask-composite:xor;z-index:-1;filter:brightness(.95)}
.btn-chroma:hover{background:rgba(255,255,255,0.07);color:#fff}
.btn-chroma:hover::before{animation-duration:2.2s;filter:brightness(1.15)}
.btn-chroma:active{transform:translateY(2px)}
@keyframes chromaFlow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
/* Variante mini para los botones numéricos */
.btn-chroma.mini{padding:.55rem .65rem;border-radius:14px;font-size:1rem;}
.options button.btn-chroma{background:#0f1c2c;border:2px solid transparent}
.options button.btn-chroma::before{padding:2px;}
.options button.btn-chroma.selected{background:#0f1c2c}
.options button.btn-chroma.selected::before{filter:brightness(1.3)}
.hint{font-size:.75rem;opacity:.75;margin-top:.75rem}
.actions{display:flex;gap:1rem;justify-content:center;margin-top:1rem}
.actions button{flex:1}
.shape{width:120px;height:120px;position:absolute;cursor:grab;touch-action:none;user-select:none;display:flex;align-items:center;justify-content:center;transition:filter .25s}
.shape.dragging{opacity:.55;filter:drop-shadow(0 0 6px #fff)}
.shape.solved{cursor:default;animation:pop .45s ease}
.target{width:120px;height:120px;display:flex;align-items:center;justify-content:center;position:absolute;opacity:.35;transition:.25s}
.target .check{position:absolute;bottom:-8px;right:-8px;background:#1f8f3e;border:2px solid #fff;width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1rem;box-shadow:0 4px 12px -4px rgba(0,0,0,.6);color:#fff;animation:pop .45s ease}
.target.solved{opacity:1;filter:drop-shadow(0 0 8px #fff);animation:glow 1s ease}
.shape.solved{animation:pop .45s ease, glow 1.2s ease}
@keyframes glow{0%{box-shadow:0 0 0 0 rgba(255,255,255,.6)}70%{box-shadow:0 0 18px 6px rgba(255,255,255,.35)}100%{box-shadow:0 0 0 0 rgba(255,255,255,0)}}
svg{width:100%;height:100%}
@keyframes pop{0%{transform:scale(.6) rotate(-12deg)}60%{transform:scale(1.15) rotate(6deg)}100%{transform:scale(1) rotate(0)}}
.feedback{position:absolute;top:-26px;font-size:.75rem;background:#2d72d9;padding:2px 6px;border-radius:6px;opacity:0;transform:translateY(-4px);pointer-events:none}
.target.highlight{opacity:.55;filter:drop-shadow(0 0 4px #fff)}
@media (max-width:900px){main{flex-direction:column}.palette,.board{min-height:300px;justify-content:center}}
